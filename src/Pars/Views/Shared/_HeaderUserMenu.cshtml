@inject IUsersPhotoService PhotoService

@{
    var displayName = User.Identity.GetUserDisplayName();
    var photoUrl = PhotoService.GetCurrentUserPhotoUrl();
}
<div class="topbar-item" data-toggle="dropdown" data-offset="0px,0px">
    <div class="btn btn-icon btn-hover-transparent-white d-flex align-items-center btn-lg px-md-2 w-md-auto">
        <span class="text-white opacity-70 font-weight-bold font-size-base d-none d-md-inline mr-1">سلام,</span>
        <span class="text-white opacity-90 font-weight-bolder font-size-base d-none d-md-inline mr-4">@displayName</span>
        <span class="symbol symbol-35">
            <img class="img-thumbnail userImage" src="@photoUrl" alt="@displayName" asp-append-version="true"
                 onerror="this.style.visibility = 'hidden';this.width=0; this.height=0;" />
            @*<span class="symbol-label text-white font-size-h5 font-weight-bold bg-white-o-30">S</span>*@
        </span>
    </div>
</div>

<div class="dropdown-menu p-0 m-0 dropdown-menu-right dropdown-menu-anim-up dropdown-menu-lg p-0">
    <div class="d-flex align-items-center p-8 rounded-top">
        <div class="symbol symbol-md bg-light-primary mr-3 flex-shrink-0">
            <img class="img-thumbnail userImage" src="@photoUrl" alt="@displayName" asp-append-version="true"
                 onerror="this.style.visibility = 'hidden';this.width=0; this.height=0;" />
        </div>
        <div class="text-dark m-0 flex-grow-1 mr-3 font-size-h5">@displayName</div>
    </div>
    <div class="separator separator-solid"></div>
    <div class="navi navi-spacer-x-0 pt-5">
        <!--begin::Item-->
        <a asp-controller="UserCard" asp-action="Index" asp-area="@AreaConstants.IdentityArea" class="navi-item px-8">
            <div class="navi-link">
                <div class="navi-icon mr-2">
                    <i class="flaticon2-calendar-3 text-success"></i>
                </div>
                <div class="navi-text">
                    <div class="font-weight-bold">
                        برگه‌ی کاربری من
                    </div>
                    <div class="text-muted">
                        مشاهده اطلاعات کاربری
                    </div>
                </div>
            </div>
        </a>
        <!--end::Item-->
        <!--begin::Item-->
        <a asp-controller="UserProfile" asp-action="Index" asp-area="@AreaConstants.IdentityArea" class="navi-item px-8">
            <div class="navi-link">
                <div class="navi-icon mr-2">
                    <i class="flaticon2-calendar-3 text-warning"></i>
                </div>
                <div class="navi-text">
                    <div class="font-weight-bold">
                        تنظیمات کاربری من
                    </div>
                    <div class="text-muted">
                        تنظیمات اکانت
                    </div>
                </div>
            </div>
        </a>
        <!--end::Item-->
        <!--begin::Item-->
        <a asp-controller="ChangePassword" asp-action="Index" asp-area="@AreaConstants.IdentityArea" class="navi-item px-8">
            <div class="navi-link">
                <div class="navi-icon mr-2">
                    <i class="fas fa-asterisk text-danger"></i>
                </div>
                <div class="navi-text">
                    <div class="font-weight-bold">
                        تغییر کلمه‌ی عبور
                    </div>
                </div>
            </div>
        </a>
        <!--end::Item-->
        <!--begin::Footer-->
        <div class="navi-separator mt-3"></div>
        <div class="navi-footer  px-8 py-5">
            <a  asp-controller="Login" asp-action="LogOff" asp-area="@AreaConstants.IdentityArea" target="_blank" class="btn btn-light-primary font-weight-bold">خروج</a>
        </div>
        <!--end::Footer-->
    </div>
    <!--end::Nav-->
</div>
<!--end::دراپ دان-->